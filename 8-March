private createObservableForValue<T>(valueGetter: () => Observable<T>): Observable<T> {
  return this.loggedIn$.pipe(
    filter(loggedIn => loggedIn),
    switchMap(() => valueGetter()),
    catchError(error => this.handleError(error))
  );
}
